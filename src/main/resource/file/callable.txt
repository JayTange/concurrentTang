-- 访问控制
CREATE TABLE WOF_TB_ACCESS_CTRL
(
	ID INTEGER NOT NULL AUTO_INCREMENT COMMENT '主键' ,

	IP_START VARCHAR(32) DEFAULT '0.0.0.0' NOT NULL COMMENT '起始IP' ,
	IP_END VARCHAR(32) DEFAULT '255.255.255.255' COMMENT '结束IP' ,
	ALLOW_ID INTEGER DEFAULT '1' NOT NULL COMMENT '允许' ,
	ORDER_ID INTEGER DEFAULT '-1' NOT NULL COMMENT '排序' ,


    PRIMARY KEY (ID)
)   COMMENT '访问控制';

-- 管理员表
CREATE TABLE WOF_TB_ADMIN
(
	ADMIN_ID INTEGER NOT NULL AUTO_INCREMENT COMMENT '管理员ID' ,

	ADMIN_ROLE INTEGER COMMENT '角色' ,
	ADMIN_NAME VARCHAR(128) NOT NULL COMMENT '姓名' ,
	ADMIN_PWD VARCHAR(64) COMMENT '密码' ,
	ENABLE INTEGER DEFAULT '1' COMMENT '启用' ,
	CHECK_STATE INTEGER DEFAULT '1' NOT NULL COMMENT '审核状态' ,
	ADMIN_IDNO VARCHAR(32) COMMENT '唯一标识' ,
	ADMIN_NATION VARCHAR(32) COMMENT '国家' ,
	ADMIN_PROVINCE VARCHAR(32) COMMENT '省' ,
	ADMIN_CITY VARCHAR(32) COMMENT '城市' ,
	ADMIN_ADDRESS VARCHAR(128) COMMENT '地址' ,
	ADMIN_ORG VARCHAR(128) COMMENT '组织' ,
	ADMIN_UNIT VARCHAR(128) COMMENT '机构' ,
	ADMIN_PHONE VARCHAR(32) COMMENT '电话' ,
	ADMIN_EMAIL VARCHAR(32) COMMENT '邮箱' ,
	ACL_SET VARCHAR(64) COMMENT '权限' ,
	CERT_CN VARCHAR(128) COMMENT '证书CN' ,
	CERT_SN VARCHAR(64) COMMENT '证书SN' ,
	CERT_SIGN_DATE DATETIME COMMENT '证书签发时间' ,
	CERT_NOT_BEFORE DATETIME COMMENT '证书起始日期' ,
	CERT_NOT_AFTER DATETIME COMMENT '证书过期日期' ,
	CERT_SUBJECT_DN VARCHAR(256) COMMENT '证书主题' ,
	CERT_EXTENSION VARCHAR(256) COMMENT '证书扩展' ,
	CERT_POLICY_NAME VARCHAR(32) COMMENT '证书策略' ,
	CERT_ISSURE_DN VARCHAR(256) COMMENT '证书发放者DN' ,
	CERT_SIGNATURE BLOB COMMENT '签名证书' ,
	CERT_ENCRYPTION BLOB COMMENT '加密证书' ,
	ADMIN_EXT1 VARCHAR(256) COMMENT '扩展项1' ,
	ADMIN_EXT2 VARCHAR(256) COMMENT '扩展项2' ,
	ADMIN_EXT3 VARCHAR(256) COMMENT '扩展项3' ,

	ADD_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	UPDATE_TIME DATETIME,

    PRIMARY KEY (ADMIN_ID)
)   COMMENT '管理员表';

-- 管理员登录尝试表
CREATE TABLE WOF_TB_ADMIN_LOGIN_ATTEMPTS
(
	ID INTEGER NOT NULL AUTO_INCREMENT COMMENT 'ID' ,

	USERNAME VARCHAR(64) COMMENT '用户名' ,
	LAST_ATTEMPT_DATE DATETIME COMMENT '最后尝试时间' ,
	ATTEMPTS_TIMES INTEGER COMMENT '已尝试次数' ,
	INVALID INTEGER COMMENT '冻结' ,


    PRIMARY KEY (ID)
)   COMMENT '管理员登录尝试表';

-- IP登录尝试表
CREATE TABLE WOF_TB_IP_LOGIN_ATTEMPTS
(
	ID INTEGER NOT NULL AUTO_INCREMENT COMMENT 'ID' ,

	IP VARCHAR(64) COMMENT 'IP' ,
	LAST_ATTEMPT_DATE DATETIME COMMENT '最后尝试时间' ,
	ATTEMPTS_TIMES INTEGER COMMENT '已尝试次数' ,
	INVALID INTEGER COMMENT '冻结' ,


    PRIMARY KEY (ID)
)   COMMENT 'IP登录尝试表';

-- 操作日志表
CREATE TABLE WOF_TB_LOG
(
	LOG_ID INTEGER NOT NULL AUTO_INCREMENT COMMENT '日志ID' ,

	LOG_CLIENT_IP VARCHAR(64) COMMENT '客户端IP' ,
	LOG_WHO INTEGER COMMENT '人员' ,
	LOG_WHEN DATETIME COMMENT '时间' ,
	LOG_DO VARCHAR(128) COMMENT '操作' ,
	LOG_WHAT VARCHAR(2048) COMMENT '详情' ,
	LOG_RES_ID INTEGER COMMENT '结果' ,
	LOG_SIGNDATA BLOB COMMENT '签名值' ,
	LOG_SIGN_VERIFY INTEGER DEFAULT '-1' NOT NULL COMMENT '签名验证结果' ,


    PRIMARY KEY (LOG_ID)
)   COMMENT '操作日志表';

-- 组织机构表
CREATE TABLE WOF_TB_ORG
(
	ORG_ID INTEGER NOT NULL AUTO_INCREMENT COMMENT '编号' ,

	ORG_NAME VARCHAR(128) COMMENT '机构名称' ,
	ORG_FULL_NAME VARCHAR(256) COMMENT '机构名称' ,
	ORG_NAME_PINYIN VARCHAR(256) COMMENT '机构名称拼音' ,
	ORG_STATUS INTEGER COMMENT '机构状态' ,
	ORG_INDATE DATETIME COMMENT '创建时间' ,
	ORG_UPDATE DATETIME COMMENT '修改时间' ,
	ORG_CODE VARCHAR(32) COMMENT '机构编码' ,
	ORG_PARENT_ID INTEGER COMMENT '上级机构' ,
	ORG_PARENT_CODE VARCHAR(64) COMMENT '上级机构' ,
	ORG_TYPE INTEGER COMMENT '机构类型' ,
	ORG_FULL_CODE VARCHAR(1024) COMMENT '机构完整编码' ,
	ORDER_INDEX VARCHAR(32) COMMENT '机构排序码' ,
	ORDER_FULL_INDEX VARCHAR(1024) COMMENT '机构排序完整编码' ,
	ORG_LEVEL INTEGER COMMENT '机构级别' ,
	ORG_LINKMAN VARCHAR(32) COMMENT '联系人' ,
	ORG_TELEPHONE VARCHAR(20) COMMENT '联系电话' ,
	ORG_POSTCODE VARCHAR(20) COMMENT '邮政编码' ,
	ORG_ADDRESS VARCHAR(128) COMMENT '联系地址' ,
	ORG_DES VARCHAR(512) COMMENT '机构描述' ,
	ADMIN_ID INTEGER COMMENT '操作管理员' ,


    PRIMARY KEY (ORG_ID)
)   COMMENT '组织机构表';


